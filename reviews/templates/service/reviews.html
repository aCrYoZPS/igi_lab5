{% extends "base.html" %}
{% block title %}Reviews{% endblock %}
{% block content %}
<main>
    <section aria-labelledby="reviews-header">
        <h2 id="reviews-header">Reviews:</h2>
        <ol>
        {% for review in reviews %}
            <li>
                <article itemscope itemtype="http://schema.org/Review" class="review">
                    <header>
                        <h3 itemprop="name">
                            {{ review.title }} |
                            <time datetime="{{ review.publication_date|date:'Y-m-d' }}" itemprop="datePublished" style="font-weight: normal; font-size: smaller;">
                                {{ review.publication_date|date:"d/m/Y" }}
                            </time>
                            <meta itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating" content="{{ review.score }}">
                            <meta itemprop="ratingValue" content="{{ review.score }}">
                            {{ review.score }}/10
                        </h3>
                        <h4>
                            <span itemprop="author" itemscope itemtype="http://schema.org/Person">
                                <meta itemprop="name" content="{{ review.author }}">
                                {{ review.author }}
                            </span>
                        </h4>
                    </header>
                    <section itemprop="reviewBody">
                        <p>{{ review.content }}</p>
                    </section>
                    {% if user.is_authenticated and user == review.author %}
                    <nav aria-label="Review actions">
                        <button onclick="location.href='{% url 'edit_review' review.pk %}'" class="button" type="button">
                            Edit Review
                        </button>
                        <button onclick="location.href='{% url 'delete_review' review.pk %}'" class="button" type="button">
                            Delete Review
                        </button>
                    </nav>
                    {% endif %}
                </article>
            </li>
        {% endfor %}
        </ol>
        <button onclick="location.href='{% url 'add_review' %}'" class="button" type="button">
            Leave a review
        </button>
    </section>
</main>
{% endblock %}
